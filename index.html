<!DOCTYPE html>
<html>
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" integrity="sha256-h20CPZ0QyXlBuAw7A+KluUYx/3pK+c7lYEpqLTlxjYQ=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="styles.css">
  <title>Escena compañia de arte y teatro</title>
  </head>
  <body>
    <main>
    <section class="section">
        <div class="columns">
          <div class="row">
            <img class="center img-center" src="https://res.cloudinary.com/dw9docv2h/image/upload/v1586132865/Logo_escena_FINAL_negro_hablsj.png" height="90" width="150" alt="Logo de escena">
          </div>
        </div>
      </section>
    <section class="section section-top">
    </section>
    <section class="section section-play-meet">
    <div class="row">    
      <div class="columns">
        <iframe class="marco-video" width="400" height="275" src="https://www.youtube.com/embed/tgbNymZ7vqY"></iframe>
      </div>
      <div class="columns">
        <h1>¿Quiénes Somos?</h1>
        <h3>Nullam sit amet leo cursus, rhoncus justo vitae, mollis diam. Proin gravida justo eu aliquet aliquet.</h3>
      </div>
    </div>
    </section>
    <section class="pt-5 titulo-clases section section-clases sectionone">
        <h1 class="center">Clases</h1>
    </section>
    <section class="row sectiontwo">
        <div class="columns-tarjeta tarjeta card">
            <h2 class="center titulo-tarjeta">Online</h2>
            <i class="fas fa-at fa-3x"></i>
            <p class="parrafos-tarjetas">Donec id lorem a justo ultricies malesuada. Aenean commodo sit amet metus gravida molestie. Cras nec nulla rhoncus, lacinia leo at, hendrerit odio.</p>
          </div>
          <div class="columns-tarjeta tarjeta card">
            <h2 class="center titulo-tarjeta">Talleres</h2>
            <i class="fas fa-users fa-3x"></i>
            <p class="parrafos-tarjetas">Donec id lorem a justo ultricies malesuada. Aenean commodo sit amet metus gravida molestie. Cras nec nulla rhoncus, lacinia leo at, hendrerit odio.</p>
          </div>
          <div class="columns-tarjeta tarjeta card">
            <h2 class="center titulo-tarjeta">Continuo</h2>
            <i class="fas fa-child fa-3x"></i>
            <p class="parrafos-tarjetas">Donec id lorem a justo ultricies malesuada. Aenean commodo sit amet metus gravida molestie. Cras nec nulla rhoncus, lacinia leo at, hendrerit odio.</p>
          </div>
    </section>
    <section class="row sectionthree">
        <p class="center parrafo-bajo-tarjeta">Aenean commodo sit amet metus gravida molestie.</p>
    </section>
    <section class="section section-programa">
        <div id="carousel-thumb" class="carousel slide carousel-fade carousel-thumbnails" data-ride="carousel" data-interval="3000">
            <!--Slides-->
            <div class="carousel-inner" role="listbox">
                <div class="carousel-item active">
                    <img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-77.jfif" alt="First slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-74.jfif" alt="Second slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-78.jfif" alt="Third slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-78.jfif" alt="Third slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-78.jfif" alt="Third slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-78.jfif" alt="Third slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-78.jfif" alt="Third slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-78.jfif" alt="Third slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-78.jfif" alt="Third slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-78.jfif" alt="Third slide">
                </div>
            </div>
            <!--/.Slides-->
            <!--Controls-->
            <a class="carousel-control-prev" href="#carousel-thumb" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carousel-thumb" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
            <!--/.Controls-->
            <ol class="carousel-indicators">
                <li data-target="#carousel-thumb" data-slide-to="0" class="active"> <img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-77.jfif" class="img-fluid"></li>
                <li data-target="#carousel-thumb" data-slide-to="1"><img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-74.jfif" class="img-fluid"></li>
                <li data-target="#carousel-thumb" data-slide-to="2"><img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-78.jfif" class="img-fluid"></li>
                <li data-target="#carousel-thumb" data-slide-to="3"><img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-78.jfif" class="img-fluid"></li>
                <li data-target="#carousel-thumb" data-slide-to="4"><img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-78.jfif" class="img-fluid"></li>
                <li data-target="#carousel-thumb" data-slide-to="5"><img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-78.jfif" class="img-fluid"></li>
                <li data-target="#carousel-thumb" data-slide-to="6"><img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-78.jfif" class="img-fluid"></li>
                <li data-target="#carousel-thumb" data-slide-to="7"><img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-78.jfif" class="img-fluid"></li>
                <li data-target="#carousel-thumb" data-slide-to="8"><img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-78.jfif" class="img-fluid"></li>
                <li data-target="#carousel-thumb" data-slide-to="9"><img class="d-block w-100" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/252820/1320x580-78.jfif" class="img-fluid"></li>
            </ol>
        </div>
    </section>
    <section class="section section-contacto">
        <div class="row container-fluid contacto-form" id="app">
            <div class="col-sm-4 d-flex flex-column contact">
                <div class="form-group">
                    <input id="nombre" name="nombre" autocomplete="off" class="form-control" v-validate="'required'" v-model="from_name" type="text" placeholder="Nombre completo" />
                    <div class="invalid-feedback">
                        {{errors.first('nombre')}}
                    </div>
                </div>
                <div class="form-group">
                    <input id="asunto" name="asunto" autocomplete="off" class="form-control" v-validate="'required'" v-model="subject" type="text" placeholder="Asunto" />
                    <div class="invalid-feedback">
                        {{errors.first('asunto')}}
                    </div>
                </div>
                <div class="form-group">
                    <input id="correo" name="correo" autocomplete="off" class="form-control" v-validate="'required|email'" v-model="from_email" type="email" placeholder="Correo electrónico" />
                    <div class="invalid-feedback">
                        {{errors.first('correo')}}
                    </div>
                </div>
                <div class="form-group">
                    <textarea id="mensaje" class="form-control" v-validate="'required|prohibirPalabras:mierda,malditos,maldita,puta,matar,coño,chupar,chupalo,mamalo,mamar'" placeholder="Mensaje" v-model="message" name="mensaje" cols="20" rows="5"></textarea>
                    <div class="invalid-feedback">
                        {{errors.first('mensaje')}}
                    </div>
                </div>
                <div v-show="errors.all().length" class="alert alert-danger">
                    <ul>
                        <li v-for="(error, i) in errors.all()">{{error}}</li>
                    </ul>
                </div>
                <button class="btn btn-success mb-5" @click="intentarEnviar">Enviar</button>
            </div>
            <div class="flex-column contacto">
                <h1 class="center contactanos-titulo">Contáctanos</h1>
                   <p>
                      Nos encantaría saber tu opinión
                   </p>
            </div>
        </div>  
    </section>
    <section class="section footer">
        <div class="row">
            <div class="columns">
                <h1>Síguenos: </h1>
                <ul>
                    <li><a href="https://www.facebook.com/escenaarteyteatro/" target="_blank"><i class="rrss fab fa-facebook-square fa-3x"></i></a></li>
                    <li><a href="https://api.whatsapp.com/send?phone=593959934473&text=&source=&data=&app_absent=" target="_blank"><i class="rrss fab fa-whatsapp fa-3x"></i></a></li>
                    <li><a href="https://instagram.com/escenaarteyteatro?igshid=19bx6ibnhsh22" target="_blank"><i class="rrss fab fa-instagram fa-3x"></i></a></li>
                </ul>
            </div>
            <div class="columns">
                <img class="center" src="https://res.cloudinary.com/dw9docv2h/image/upload/v1586132865/Logo_escena_FINAL_negro_hablsj.png" height="90" width="150" alt="Logo de escena">
            </div>
            <div class="columns">
                <h3>Dirección</h3>
                <h5 style="text-align: justify">
                    <i class="fas fa-map-marker-alt fa-1x"></i>
                    Donec id lorem a justo ultricies malesuada. Aenean commodo sit amet metus gravida molestie.
                </h5>
            </div>
        </div>
        <div class="row">
            <h6 class="center">
                Copyright<i class="far fa-copyright"></i> ESCENA Compañía de arte y teatro. 2020.
            </h6>
        </div>
    </section>
    </main>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js" integrity="sha256-ngFW3UnAN0Tnm76mDuu7uUtYEcG3G5H1+zioJw3t+68=" crossorigin="anonymous"></script>
    <script src="https://cdn.rawgit.com/twbs/bootstrap/v4-dev/dist/js/bootstrap.bundle.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axe-core/2.4.2/axe.min.js"></script>
    <script src="https://cdn.emailjs.com/dist/email.min.js" type="text/javascript"></script>
    <script src="https://unpkg.com/vee-validate@2.2.9/dist/vee-validate.js"></script>
    <script src="https://unpkg.com/vee-validate@2.2.9/dist/locale/es.js"></script>
    <script>
    (function(){
        emailjs.init("user_dyP5KRs4t0ZT4EAxKWqtz");
    })();
        
    Vue.use(VeeValidate, {
        classes: true,// Sí queremos que ponga clases automáticamente
        // Indicar qué clase poner al input en caso de que sea
        // válido o inválido. Usamos Bootstrap 4
        classNames: {
            valid: "is-valid",
            invalid: "is-invalid",
        },
        // Podría ser blur, change, etcétera. Si está vacío
        // entonces se tiene que validar manualmente
        events: "change|blur|keyup",
    });
    VeeValidate.Validator.localize("es");
    VeeValidate.Validator.extend('prohibirPalabras', {
        getMessage: (campo, argumentos) => {
            // argumentos es un arreglo
            // return "El campo " + campo + " no puede contener las siguientes palabras: " + argumentos.join(" ");
            return "El campo " + campo + " no puede contener groserias, insultos o improperios.";
        },
        validate: (valor, argumentos) => {
            return argumentos.every(argumento => !valor.includes(argumento))
        },
    })

    new Vue({
                    el: '#app',
                    data(){
                        return {
                            from_name: '',
                            from_email: '',
                            message: '',
                            subject: '',
                        }
                    },
        methods: {
                    async intentarEnviar() {
                        let data = {
                            from_name: this.from_name,
                            from_email: this.from_email,
                            message: this.message,
                            subject: this.subject,
                        };

                        let isValidForm = await this.$validator.validate().then(esValido => esValido);
                        if (isValidForm) this.enviarMail(data);
                    },
                    async enviarMail(item) {
                        let sendEmail = await emailjs.send("daniel_rivas", "form_contact", item)
                            .then(function (response) {
                                if (response.text === 'OK') {
                                    alert('El comentario se ha enviado de forma exitosa');
                                }
                                console.log(`SUCCESS STATUS:${response.status} TEXT:${response.status}`)
                                return true;
                            }, function (err) {
                                alert('Ocurrió un problema al enviar el comentario');
                                console.log("FAILED. error=", err);
                                return false;
                            });

                        if (sendEmail) await this.limpiar();
                    },
                    async limpiar() {
                        await this.$validator.reset(); 
                        this.from_name = null;
                        this.from_email = null;
                        this.message = null;
                        this.subject = null;
                    }
                }
    });
    </script>
  </body>
</html>
